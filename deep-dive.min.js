function initDeepDive(){gsap.registerPlugin(ScrollTrigger,ScrollToPlugin);const mainWrapper=document.querySelector(".main-wrapper"),pageWrapper=document.querySelector(".page-wrapper"),triggers=[trigger1,trigger2,trigger3,trigger4,trigger5,trigger6,trigger7,trigger8,trigger9,trigger10]=Array.from(document.querySelectorAll("[fs-deep-dive-id^='trigger-']")),openButtons=[openButton1,openButton2,openButton3,openButton4,openButton5,openButton6,openButton7,openButton8,openButton9,openButton10]=Array.from(document.querySelectorAll("[fs-deep-dive-id^='button-']")),closeButton=document.querySelectorAll("[fs-deep-dive-id='close-button']"),ddModals=document.querySelectorAll("[fs-deep-dive-id='modals']"),deepDiveContainers=document.querySelectorAll(".deep-dive-container"),contentX=document.querySelectorAll(".deep-dive-content-x"),deepDiveContents=document.querySelectorAll(".deep-dive-content");let originalY=null,windowWidth=window.innerWidth;const openingDuration=.8,closingDuration=.8;let scrollTriggerInstance;function openDeepDive(trigger,button){const container=trigger.closest(".deep-dive-container"),deepDiveContent=container.querySelector(".deep-dive-content"),scrollWrapper=container.querySelector(".scrolling-content"),contentY=container.querySelector(".deep-dive-content-y"),contentX=container.querySelector(".deep-dive-content-x");let children=scrollWrapper.children,totalWidth=0;deepDiveContainers.forEach(container=>{container!==trigger.closest(".deep-dive-container")&&(container.style.position="absolute")});for(let i=0;i<children.length;i++)totalWidth+=children[i].clientWidth;if(gsap.set(contentY,{height:totalWidth}),totalWidth<windowWidth){let movement=0;gsap.to(contentX,{x:movement,ease:"none",scrollTrigger:{trigger:contentY,scrub:.1,markers:!1,start:"top top",end:"bottom top"}})}else{let movement=totalWidth/windowWidth*100,tl=gsap.timeline();gsap.set(contentX,{x:0}),scrollTriggerInstance&&scrollTriggerInstance.kill(),scrollTriggerInstance=ScrollTrigger.create({trigger:pageWrapper,scrub:!0,markers:!0,start:"top top",end:"+="+1.1*movement+"%",onUpdate:self=>{gsap.set(contentX,{xPercent:-movement*self.progress})}})}const open=gsap.timeline({ease:"power3.inOut"});open.to(container,{xPercent:0,zIndex:"2",pointerEvents:"auto",duration:.8}).to(mainWrapper,{xPercent:-105,duration:.8},"<").to(deepDiveContent,{xPercent:0,duration:1},"-= 0.15").to(window,{scrollTo:0,duration:0,ease:"none"},"<=+0.76").to(deepDiveContent,{opacity:1,duration:.8},"<=+ 0.25").to(deepDiveContent,{opacity:1,duration:.8},"<").to(ddModals,{pointerEvents:"auto"}),button.addEventListener("click",(function(){trigger.click()}))}gsap.set(deepDiveContainers,{x:0,xPercent:105}),gsap.set(deepDiveContents,{x:0,xPercent:105,opacity:0}),openButtons.forEach((button,index)=>{button.addEventListener("click",(function(){openDeepDive(triggers[index],button),originalY=this.closest("section").getBoundingClientRect().top+window.pageYOffset,gsap.to(mainWrapper,{position:"fixed",marginTop:-originalY,duration:0,delay:.8,ease:"none"})}))}),closeButton.forEach(button=>{button.addEventListener("click",(function(){const close=gsap.timeline({ease:"power1.inOut"}),container=this.closest(".deep-dive-container"),deepDiveContent=container.querySelector(".deep-dive-content");close.to(contentX,{xPercent:0,duration:.8}).to(deepDiveContent,{opacity:0,duration:.8},"<=+ 0.25").to(container,{xPercent:105,pointerEvents:"none",duration:.8},"<").to(mainWrapper,{position:"static",marginTop:0,duration:0},"<").to(ddModals,{pointerEvents:"none"},"<").to(mainWrapper,{xPercent:0,duration:.8},"<").to(window,{duration:0,scrollTo:originalY,ease:"none"},"-=0.65")}))})}document.addEventListener("DOMContentLoaded",()=>{if("undefined"!=typeof gsap)initDeepDive();else{const checkGSAP=setInterval(()=>{"undefined"!=typeof gsap&&(clearInterval(checkGSAP),initDeepDive())},100);setTimeout(()=>{clearInterval(checkGSAP),"undefined"==typeof gsap&&console.error("GSAP failed to load after 10 seconds")},1e4)}});